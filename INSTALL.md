# 安装说明

## 插件文件位置

插件安装包位于：`publish/com.alalazy.ChessViewer.jpl`

## 安装步骤

### 1. 打开 Joplin 插件管理

在 Joplin 中：
- **Windows/Linux**: 工具 → 选项 → 插件
- **macOS**: Joplin → 偏好设置 → 插件

### 2. 安装插件

1. 点击 **"从文件安装"** 按钮
2. 浏览并选择 `publish/com.alalazy.ChessViewer.jpl` 文件
3. 点击 **"打开"** 或 **"确定"**
4. 等待安装完成

### 3. 重启 Joplin

安装完成后，**必须重启 Joplin** 才能使插件生效。

### 4. 验证安装

重启后，检查以下内容：

1. **工具栏按钮**：在笔记编辑器的工具栏中应该能看到一个国际象棋图标的按钮
2. **插件列表**：在插件管理页面应该能看到 "Chess Viewer" 插件
3. **插件状态**：确保插件已启用（开关为开启状态）

## 快速测试

### 测试步骤

1. 创建一个新笔记
2. 点击工具栏上的 **"插入PGN棋局"** 按钮
3. 应该会自动插入以下内容：

```pgn
[Event "示例对局"]
[Site "?"]
[Date "2024.01.01"]
[Round "?"]
[White "白方"]
[Black "黑方"]
[Result "1-0"]

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6
```

4. 切换到 **阅读模式**（点击右上角的眼睛图标）
5. 应该能看到一个交互式的国际象棋棋盘
6. 尝试点击控制按钮（开始、上一步、下一步、结束、翻转）

### 预期结果

- ✅ 棋盘正确显示
- ✅ 初始位置正确
- ✅ 控制按钮可以正常工作
- ✅ 移动信息正确显示

## 故障排除

### 问题1：工具栏按钮没有显示

**解决方案**：
1. 确认插件已安装
2. 确认插件已启用
3. 重启 Joplin
4. 检查 Joplin 版本（需要 3.5 或更高版本）

### 问题2：棋盘没有渲染

**解决方案**：
1. 确保代码块语言标记为 `pgn`
2. 确保在阅读模式下查看
3. 检查 PGN 格式是否正确
4. 打开浏览器开发者工具查看是否有错误信息

### 问题3：控制按钮不工作

**解决方案**：
1. 等待几秒钟，库可能还在加载
2. 刷新笔记（切换到其他笔记再切换回来）
3. 检查网络连接（需要从 CDN 加载库文件）

### 问题4：多个棋盘显示异常

**解决方案**：
1. 确保每个 PGN 代码块都是独立的
2. 刷新笔记
3. 如果问题持续，尝试重启 Joplin

## 卸载插件

如果需要卸载插件：

1. 打开插件管理页面
2. 找到 "Chess Viewer" 插件
3. 点击 **"删除"** 按钮
4. 重启 Joplin

## 系统要求

- **Joplin 版本**: 3.5 或更高
- **平台**: Windows, macOS, Linux
- **网络**: 需要互联网连接（用于加载 Chess.js 和 Chessboard.js 库）

## 更新插件

如果有新版本：

1. 下载新的 `.jpl` 文件
2. 在插件管理页面卸载旧版本
3. 按照安装步骤安装新版本
4. 重启 Joplin

## 获取帮助

如果遇到问题：

1. 查看 [README.md](./README.md) - 完整功能说明
2. 查看 [QUICKSTART.md](./QUICKSTART.md) - 快速开始指南
3. 查看 [EXAMPLES.md](./EXAMPLES.md) - 使用示例
4. 查看 [TEST.md](./TEST.md) - 测试用例

## 开发者信息

- **插件ID**: com.alalazy.ChessViewer
- **版本**: 1.0.0
- **作者**: alalazy
- **许可证**: MIT

---

祝你使用愉快！♟️